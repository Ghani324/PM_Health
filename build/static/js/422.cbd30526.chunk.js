"use strict";(self.webpackChunkdemo1=self.webpackChunkdemo1||[]).push([[422],{6422:function(e,t,r){r.r(t),r.d(t,{default:function(){return oe}});var n=r(6871),a=r(1732),s=r(885),i=r(2791),c=r(4216),o=r(1413),l=r(1933),d=r(4569),u=r.n(d),m="/api/createuser",x=function(e){return u().put(m,e).then((function(e){return e.data})).then((function(e){return e.data}))},f=function(e){return u().post("".concat(m,"/").concat(e.id),e).then((function(e){return e.data})).then((function(e){return e.data}))},p=r(184),h=(0,i.createContext)(c.vv),v=function(e){var t=e.children,r=(0,i.useState)(c.vv.state),n=(0,s.Z)(r,2),a=n[0],l=n[1];return(0,p.jsx)(h.Provider,{value:{state:a,updateState:function(e){var t=(0,o.Z)((0,o.Z)({},a),e);l(t)}},children:t})},j=function(){return(0,i.useContext)(h)},b=(0,c.gl)(c.B2),g=function(e){var t=e.children,r=j().state,n=(0,i.useState)((0,c.gJ)(r)),a=(0,s.Z)(n,2),o=a[0],d=a[1],m=(0,i.useMemo)((function(){return(0,c.gJ)(r)}),[r]);(0,i.useEffect)((function(){o!==m&&d(m)}),[m]);var x=(0,l.useQuery)("".concat(c.vb.USERS_LIST,"-").concat(o),(function(){return function(e){return u().get("".concat("/api/createuser/query","?").concat(e)).then((function(e){return e.data}))}(o)}),{cacheTime:0,keepPreviousData:!0,refetchOnWindowFocus:!1}),f=x.isFetching,h=x.refetch,v=x.data;return(0,p.jsx)(b.Provider,{value:{isLoading:f,refetch:h,response:v,query:o},children:t})},N=function(){return(0,i.useContext)(b)},y=function(){var e=N().response;return e&&(null===e||void 0===e?void 0:e.data)||[]},Z=function(){return N().isLoading},w=(0,i.createContext)(c.px),S=function(e){var t=e.children,r=(0,i.useState)(c.px.selected),n=(0,s.Z)(r,2),a=n[0],o=n[1],l=(0,i.useState)(c.px.itemIdForUpdate),d=(0,s.Z)(l,2),u=d[0],m=d[1],x=N().isLoading,f=y(),h=(0,i.useMemo)((function(){return(0,c.Qx)(x,f)}),[x,f]),v=(0,i.useMemo)((function(){return(0,c.HX)(f,a)}),[f,a]);return(0,p.jsx)(w.Provider,{value:{selected:a,itemIdForUpdate:u,setItemIdForUpdate:m,disabled:h,isAllSelected:v,onSelect:function(e){(0,c.G8)(e,a,o)},onSelectAll:function(){(0,c.ir)(v,o,f)},clearSelected:function(){o([])}},children:t})},k=function(){return(0,i.useContext)(w)},P=function(){k().setItemIdForUpdate;return(0,p.jsx)("div",{className:"d-flex justify-content-end","data-kt-user-table-toolbar":"base"})},_=r(4165),U=r(5861),C=function(){var e=k(),t=e.selected,r=e.clearSelected,n=(0,l.useQueryClient)(),a=N().query,s=(0,l.useMutation)((function(){return function(e){var t=e.map((function(e){return u().delete("".concat(m,"/").concat(e))}));return u().all(t).then((function(){}))}(t)}),{onSuccess:function(){n.invalidateQueries(["".concat(c.vb.USERS_LIST,"-").concat(a)]),r()}});return(0,p.jsxs)("div",{className:"d-flex justify-content-end align-items-center",children:[(0,p.jsxs)("div",{className:"fw-bolder me-5",children:[(0,p.jsx)("span",{className:"me-2",children:t.length})," Selected"]}),(0,p.jsx)("button",{type:"button",className:"btn btn-danger",onClick:(0,U.Z)((0,_.Z)().mark((function e(){return(0,_.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.mutateAsync();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),children:"Delete Selected"})]})},I=function(){var e=j().updateState,t=(0,i.useState)(""),r=(0,s.Z)(t,2),n=r[0],a=r[1],l=(0,c.Nr)(n,150);return(0,i.useEffect)((function(){void 0!==l&&void 0!==n&&e((0,o.Z)({search:l},c.Xw))}),[l]),(0,p.jsx)("div",{className:"card-title",children:(0,p.jsxs)("div",{className:"d-flex align-items-center position-relative my-1",children:[(0,p.jsx)(c.D8,{path:"/media/icons/duotune/general/gen021.svg",className:"svg-icon-1 position-absolute ms-6"}),(0,p.jsx)("input",{type:"text","data-kt-user-table-filter":"search",className:"form-control form-control-solid w-250px ps-14",placeholder:"Search user",value:n,onChange:function(e){return a(e.target.value)}})]})})},F=function(){var e=k().selected;return(0,p.jsxs)("div",{className:"card-header border-0 pt-6",children:[(0,p.jsx)(I,{}),(0,p.jsx)("div",{className:"card-toolbar",children:e.length>0?(0,p.jsx)(C,{}):(0,p.jsx)(P,{})})]})},M=r(1358),R=function(e){var t=e.column;return(0,p.jsx)(p.Fragment,{children:t.Header&&"string"===typeof t.Header?(0,p.jsx)("th",(0,o.Z)((0,o.Z)({},t.getHeaderProps()),{},{children:t.render("Header")})):t.render("Header")})},q=r(8182),L=function(e){var t=e.row;return(0,p.jsx)("tr",(0,o.Z)((0,o.Z)({},t.getRowProps()),{},{children:t.cells.map((function(e){return(0,p.jsx)("td",(0,o.Z)((0,o.Z)({},e.getCellProps()),{},{className:(0,q.Z)({"text-end min-w-100px":"actions"===e.column.id}),children:e.render("Cell")}))}))}))},H=r(6459),A=function(e){var t=e.user;return(0,p.jsxs)("div",{className:"d-flex align-items-center",children:[(0,p.jsx)("div",{className:"symbol symbol-circle symbol-50px overflow-hidden me-3"}),(0,p.jsx)("div",{className:"d-flex flex-column",children:(0,p.jsx)("a",{href:"#",className:"text-gray-800 text-hover-primary mb-1",children:t.UserName})})]})},E=function(e){var t=e.user;return(0,p.jsxs)("div",{className:"d-flex align-items-center",children:[(0,p.jsx)("div",{className:"symbol symbol-circle symbol-50px overflow-hidden me-3"}),(0,p.jsx)("div",{className:"d-flex flex-column",children:(0,p.jsx)("a",{href:"#",className:"text-gray-800 text-hover-primary mb-1",children:t.ReportingManager})})]})},T=function(e){var t=e.user;return(0,p.jsxs)("div",{className:"d-flex align-items-center",children:[(0,p.jsx)("div",{className:"symbol symbol-circle symbol-50px overflow-hidden me-3"}),(0,p.jsx)("div",{className:"d-flex flex-column",children:(0,p.jsx)("a",{href:"#",className:"text-gray-800 text-hover-primary mb-1",children:t.PmName})})]})},O=function(e){var t=e.user;return(0,p.jsxs)("div",{className:"d-flex align-items-center",children:[(0,p.jsx)("div",{className:"symbol symbol-circle symbol-50px overflow-hidden me-3"}),(0,p.jsx)("div",{className:"d-flex flex-column",children:(0,p.jsx)("a",{href:"#",className:"text-gray-800 text-hover-primary mb-1",children:t.PracticeName})})]})},X=function(e){var t=e.className,r=e.title,n=e.tableProps,a=n.column.id,s=j(),l=s.state,d=s.updateState,u=(0,i.useMemo)((function(){return l.sort&&l.sort===a}),[l,a]),m=(0,i.useMemo)((function(){return l.order}),[l]);return(0,p.jsx)("th",(0,o.Z)((0,o.Z)({},n.column.getHeaderProps()),{},{className:(0,q.Z)(t,u&&void 0!==m&&"table-sort-".concat(m)),style:{cursor:"pointer"},onClick:function(){if("actions"!==a&&"selection"!==a)if(u){if(u&&void 0!==m){if("asc"===m)return void d((0,o.Z)({sort:a,order:"desc"},c.Xw));d((0,o.Z)({sort:void 0,order:void 0},c.Xw))}}else d((0,o.Z)({sort:a,order:"asc"},c.Xw))},children:r}))},D=[{Header:function(e){return(0,p.jsx)(X,{tableProps:e,title:"User Name",className:"min-w-125px"})},id:"UserName",Cell:function(e){var t=Object.assign({},((0,H.Z)(e),e));return(0,p.jsx)(A,{user:t.data[t.row.index]})}},{Header:function(e){return(0,p.jsx)(X,{tableProps:e,title:"Reporting Manager",className:"min-w-125px"})},id:"ReportingManager",Cell:function(e){var t=Object.assign({},((0,H.Z)(e),e));return(0,p.jsx)(E,{user:t.data[t.row.index]})}},{Header:function(e){return(0,p.jsx)(X,{tableProps:e,title:"PM System",className:"min-w-125px"})},id:"PmId",Cell:function(e){var t=Object.assign({},((0,H.Z)(e),e));return(0,p.jsx)(T,{user:t.data[t.row.index]})}},{Header:function(e){return(0,p.jsx)(X,{tableProps:e,title:"Practice Name",className:"min-w-125px"})},id:"PracticeId",Cell:function(e){var t=Object.assign({},((0,H.Z)(e),e));return(0,p.jsx)(O,{user:t.data[t.row.index]})}}],Q=function(){return(0,p.jsx)("div",{style:(0,o.Z)((0,o.Z)({},{borderRadius:"0.475rem",boxShadow:"0 0 50px 0 rgb(82 63 105 / 15%)",backgroundColor:"#fff",color:"#7e8299",fontWeight:"500",margin:"0",width:"auto",padding:"1rem 2rem",top:"calc(50% - 2rem)",left:"calc(50% - 4rem)"}),{},{position:"absolute",textAlign:"center"}),children:"Processing..."})},W=function(e){return"&laquo; Previous"===e?"Previous":"Next &raquo;"===e?"Next":e},V=function(){var e,t=function(){var e=(0,o.Z)({links:[]},c.Xw),t=N().response;return t&&t.payload&&t.payload.pagination?t.payload.pagination:e}(),r=Z(),n=j().updateState;return(0,p.jsxs)("div",{className:"row",children:[(0,p.jsx)("div",{className:"col-sm-12 col-md-5 d-flex align-items-center justify-content-center justify-content-md-start"}),(0,p.jsx)("div",{className:"col-sm-12 col-md-7 d-flex align-items-center justify-content-center justify-content-md-end",children:(0,p.jsx)("div",{id:"kt_table_users_paginate",children:(0,p.jsx)("ul",{className:"pagination",children:null===(e=t.links)||void 0===e?void 0:e.map((function(e){return(0,o.Z)((0,o.Z)({},e),{},{label:W(e.label)})})).map((function(e){return(0,p.jsx)("li",{className:(0,q.Z)("page-item",{active:t.page===e.page,disabled:r,previous:"Previous"===e.label,next:"Next"===e.label}),children:(0,p.jsx)("a",{className:(0,q.Z)("page-link",{"page-text":"Previous"===e.label||"Next"===e.label,"me-5":"Previous"===e.label}),onClick:function(){var a;(a=e.page)&&!r&&t.page!==a&&n({page:a,items_per_page:t.items_per_page||10})},style:{cursor:"pointer"},children:W(e.label)})},e.label)}))})})})]})},B=function(){var e=y(),t=Z(),r=(0,i.useMemo)((function(){return e}),[e]),n=(0,i.useMemo)((function(){return D}),[]),a=(0,M.useTable)({columns:n,data:r}),s=a.getTableProps,l=a.getTableBodyProps,d=a.headers,u=a.rows,m=a.prepareRow;return(0,p.jsxs)(c.mN,{className:"py-4",children:[(0,p.jsx)("div",{className:"table-responsive",children:(0,p.jsxs)("table",(0,o.Z)((0,o.Z)({id:"kt_table_users",className:"table align-middle table-row-dashed fs-6 gy-5 dataTable no-footer"},s()),{},{children:[(0,p.jsx)("thead",{children:(0,p.jsx)("tr",{className:"text-start text-muted fw-bolder fs-7 text-uppercase gs-0",children:d.map((function(e){return(0,p.jsx)(R,{column:e},e.id)}))})}),(0,p.jsx)("tbody",(0,o.Z)((0,o.Z)({className:"text-gray-600 fw-bold"},l()),{},{children:u.length>0?u.map((function(e,t){return m(e),(0,p.jsx)(L,{row:e},"row-".concat(t,"-").concat(e.id))})):(0,p.jsx)("tr",{children:(0,p.jsx)("td",{colSpan:7,children:(0,p.jsx)("div",{className:"d-flex text-center w-100 align-content-center justify-content-center",children:"No matching records found"})})})}))]}))}),(0,p.jsx)(V,{}),t&&(0,p.jsx)(Q,{})]})},J=function(){var e=k().setItemIdForUpdate;return(0,p.jsxs)("div",{className:"modal-header",children:[(0,p.jsx)("h2",{className:"fw-bolder",children:"Edit User"}),(0,p.jsx)("div",{className:"btn btn-icon btn-sm btn-active-icon-primary","data-kt-users-modal-action":"close",onClick:function(){return e(void 0)},style:{cursor:"pointer"},children:(0,p.jsx)(c.D8,{path:"/media/icons/duotune/arrows/arr061.svg",className:"svg-icon-1"})})]})},G=r(6863),z=r(5173),K="",Y="",$="",ee="",te=G.Ry().shape({UserName:G.Z_().required("User Name is required"),ReportingManager:G.Z_().required("Reporting Manager is required"),PmSystem:G.Z_().required("Pm System is required"),PracticeName:G.Z_().required("Practice Name is required")}),re=function(e){var t=e.user,r=e.isUserLoading,n=k().setItemIdForUpdate,a=N().refetch,l=(0,i.useState)((0,o.Z)((0,o.Z)({},t),{},{UserName:t.UserName||K,ReportingManager:t.ReportingManager||Y,PmName:t.PmName||$,PracticeName:t.PracticeName||ee})),d=(0,s.Z)(l,1)[0],u=function(e){e&&a(),n(void 0)},m=(0,z.TA)({initialValues:d,validationSchema:te,onSubmit:function(){var e=(0,U.Z)((0,_.Z)().mark((function e(t,r){var n;return(0,_.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((n=r.setSubmitting)(!0),e.prev=2,!(0,c.UE)(t.id)){e.next=8;break}return e.next=6,f(t);case 6:e.next=10;break;case 8:return e.next=10,x(t);case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),console.error(e.t0);case 15:return e.prev=15,n(!0),u(!0),e.finish(15);case 19:case"end":return e.stop()}}),e,null,[[2,12,15,19]])})));return function(t,r){return e.apply(this,arguments)}}()});return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("form",{id:"kt_modal_add_user_form",className:"form",onSubmit:m.handleSubmit,noValidate:!0,children:[(0,p.jsx)("div",{className:"d-flex flex-column scroll-y me-n7 pe-7",id:"kt_modal_add_user_scroll","data-kt-scroll":"true","data-kt-scroll-activate":"{default: false, lg: true}","data-kt-scroll-max-height":"auto","data-kt-scroll-dependencies":"#kt_modal_add_user_header","data-kt-scroll-wrappers":"#kt_modal_add_user_scroll","data-kt-scroll-offset":"300px"}),(0,p.jsxs)("div",{className:"text-center pt-15",children:[(0,p.jsx)("button",{type:"reset",onClick:function(){return u()},className:"btn btn-light me-3","data-kt-users-modal-action":"cancel",disabled:m.isSubmitting||r,children:"Discard"}),(0,p.jsxs)("button",{type:"submit",className:"btn btn-primary","data-kt-users-modal-action":"submit",disabled:r||m.isSubmitting||!m.isValid||!m.touched,children:[(0,p.jsx)("span",{className:"indicator-label",children:"Submit"}),(m.isSubmitting||r)&&(0,p.jsxs)("span",{className:"indicator-progress",children:["Please wait..."," ",(0,p.jsx)("span",{className:"spinner-border spinner-border-sm align-middle ms-2"})]})]})]})]}),(m.isSubmitting||r)&&(0,p.jsx)(Q,{})]})},ne=function(){var e=k(),t=e.itemIdForUpdate,r=e.setItemIdForUpdate,n=(0,c.UE)(t),a=(0,l.useQuery)("".concat(c.vb.USERS_LIST,"-user-").concat(t),(function(){return e=t,u().get("".concat(m,"/users?user_id=").concat(e)).then((function(e){return e.data})).then((function(e){return e.data}));var e}),{cacheTime:0,enabled:n,onError:function(e){r(void 0),console.error(e)}}),s=a.isLoading,i=a.data,o=a.error;return t?s||o||!i?null:(0,p.jsx)(re,{isUserLoading:s,user:i}):(0,p.jsx)(re,{isUserLoading:s,user:{id:void 0}})},ae=function(){return(0,i.useEffect)((function(){return document.body.classList.add("modal-open"),function(){document.body.classList.remove("modal-open")}}),[]),(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("div",{className:"modal fade show d-block",id:"kt_modal_add_user",role:"dialog",tabIndex:-1,"aria-modal":"true",children:(0,p.jsx)("div",{className:"modal-dialog modal-dialog-centered mw-650px",children:(0,p.jsxs)("div",{className:"modal-content",children:[(0,p.jsx)(J,{}),(0,p.jsx)("div",{className:"modal-body scroll-y mx-5 mx-xl-15 my-7",children:(0,p.jsx)(ne,{})})]})})}),(0,p.jsx)("div",{className:"modal-backdrop fade show"})]})},se=function(){var e=k().itemIdForUpdate;return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)(c.O7,{children:[(0,p.jsx)(F,{}),(0,p.jsx)(B,{})]}),void 0!==e&&(0,p.jsx)(ae,{})]})},ie=function(){return(0,p.jsx)(v,{children:(0,p.jsx)(g,{children:(0,p.jsx)(S,{children:(0,p.jsx)(se,{})})})})},ce=[{title:"User Management",path:"/apps/user-management/users",isSeparator:!1,isActive:!1},{title:"",path:"",isSeparator:!0,isActive:!1}],oe=function(){return(0,p.jsxs)(n.Z5,{children:[(0,p.jsx)(n.AW,{element:(0,p.jsx)(n.j3,{}),children:(0,p.jsx)(n.AW,{path:"users",element:(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(a.V1,{breadcrumbs:ce,children:"Users list"}),(0,p.jsx)(ie,{})]})})}),(0,p.jsx)(n.AW,{index:!0,element:(0,p.jsx)(n.Fg,{to:"/apps/user-management/users"})})]})}}}]);
//# sourceMappingURL=422.cbd30526.chunk.js.map