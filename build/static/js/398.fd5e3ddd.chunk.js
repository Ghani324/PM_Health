"use strict";(self.webpackChunkdemo1=self.webpackChunkdemo1||[]).push([[398],{7398:function(e,t,n){n.r(t),n.d(t,{default:function(){return ie}});var r=n(6871),a=n(1732),s=n(885),i=n(2791),l=n(4216),o=n(1413),c=n(1933),d=n(4569),u=n.n(d),m="/api/roles",f=function(e){return u().put(m,e).then((function(e){return e.data})).then((function(e){return e.data}))},x=n(184),p=(0,i.createContext)(l.vv),h=function(e){var t=e.children,n=(0,i.useState)(l.vv.state),r=(0,s.Z)(n,2),a=r[0],c=r[1];return(0,x.jsx)(p.Provider,{value:{state:a,updateState:function(e){var t=(0,o.Z)((0,o.Z)({},a),e);c(t)}},children:t})},v=function(){return(0,i.useContext)(p)},j=(0,l.gl)(l.B2),b=function(e){var t=e.children,n=v().state,r=(0,i.useState)((0,l.gJ)(n)),a=(0,s.Z)(r,2),o=a[0],d=a[1],m=(0,i.useMemo)((function(){return(0,l.gJ)(n)}),[n]);(0,i.useEffect)((function(){o!==m&&d(m)}),[m]);var f=(0,c.useQuery)("".concat(l.vb.USERS_LIST,"-").concat(o),(function(){return function(e){return u().get("".concat("/api/roles/query","?").concat(e)).then((function(e){return e.data}))}(o)}),{cacheTime:0,keepPreviousData:!0,refetchOnWindowFocus:!1}),p=f.isFetching,h=f.refetch,b=f.data;return(0,x.jsx)(j.Provider,{value:{isLoading:p,refetch:h,response:b,query:o},children:t})},g=function(){return(0,i.useContext)(j)},N=function(){var e=g().response;return e&&(null===e||void 0===e?void 0:e.data)||[]},y=function(){return g().isLoading},Z=(0,i.createContext)(l.px),w=function(e){var t=e.children,n=(0,i.useState)(l.px.selected),r=(0,s.Z)(n,2),a=r[0],o=r[1],c=(0,i.useState)(l.px.itemIdForUpdate),d=(0,s.Z)(c,2),u=d[0],m=d[1],f=g().isLoading,p=N(),h=(0,i.useMemo)((function(){return(0,l.Qx)(f,p)}),[f,p]),v=(0,i.useMemo)((function(){return(0,l.HX)(p,a)}),[p,a]);return(0,x.jsx)(Z.Provider,{value:{selected:a,itemIdForUpdate:u,setItemIdForUpdate:m,disabled:h,isAllSelected:v,onSelect:function(e){(0,l.G8)(e,a,o)},onSelectAll:function(){(0,l.ir)(v,o,p)},clearSelected:function(){o([])}},children:t})},_=function(){return(0,i.useContext)(Z)},S=function(){_().setItemIdForUpdate;return(0,x.jsx)("div",{className:"d-flex justify-content-end","data-kt-user-table-toolbar":"base"})},k=n(4165),P=n(5861),C=function(){var e=_(),t=e.selected,n=e.clearSelected,r=(0,c.useQueryClient)(),a=g().query,s=(0,c.useMutation)((function(){return function(e){var t=e.map((function(e){return u().delete("".concat(m,"/").concat(e))}));return u().all(t).then((function(){}))}(t)}),{onSuccess:function(){r.invalidateQueries(["".concat(l.vb.USERS_LIST,"-").concat(a)]),n()}});return(0,x.jsxs)("div",{className:"d-flex justify-content-end align-items-center",children:[(0,x.jsxs)("div",{className:"fw-bolder me-5",children:[(0,x.jsx)("span",{className:"me-2",children:t.length})," Selected"]}),(0,x.jsx)("button",{type:"button",className:"btn btn-danger",onClick:(0,P.Z)((0,k.Z)().mark((function e(){return(0,k.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.mutateAsync();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),children:"Delete Selected"})]})},R=function(){var e=v().updateState,t=(0,i.useState)(""),n=(0,s.Z)(t,2),r=n[0],a=n[1],c=(0,l.Nr)(r,150);return(0,i.useEffect)((function(){void 0!==c&&void 0!==r&&e((0,o.Z)({search:c},l.Xw))}),[c]),(0,x.jsx)("div",{className:"card-title",children:(0,x.jsxs)("div",{className:"d-flex align-items-center position-relative my-1",children:[(0,x.jsx)(l.D8,{path:"/media/icons/duotune/general/gen021.svg",className:"svg-icon-1 position-absolute ms-6"}),(0,x.jsx)("input",{type:"text","data-kt-user-table-filter":"search",className:"form-control form-control-solid w-250px ps-14",placeholder:"Search user",value:r,onChange:function(e){return a(e.target.value)}})]})})},F=function(){var e=_().selected;return(0,x.jsxs)("div",{className:"card-header border-0 pt-6",children:[(0,x.jsx)(R,{}),(0,x.jsx)("div",{className:"card-toolbar",children:e.length>0?(0,x.jsx)(C,{}):(0,x.jsx)(S,{})})]})},L=n(1358),I=function(e){var t=e.column;return(0,x.jsx)(x.Fragment,{children:t.Header&&"string"===typeof t.Header?(0,x.jsx)("th",(0,o.Z)((0,o.Z)({},t.getHeaderProps()),{},{children:t.render("Header")})):t.render("Header")})},U=n(8182),A=function(e){var t=e.row;return(0,x.jsx)("tr",(0,o.Z)((0,o.Z)({},t.getRowProps()),{},{children:t.cells.map((function(e){return(0,x.jsx)("td",(0,o.Z)((0,o.Z)({},e.getCellProps()),{},{className:(0,U.Z)({"text-end min-w-100px":"actions"===e.column.id}),children:e.render("Cell")}))}))}))},T=n(6459),M=function(e){var t=e.user;return(0,x.jsxs)("div",{className:"d-flex align-items-center",children:[(0,x.jsx)("div",{className:"symbol symbol-circle symbol-50px overflow-hidden me-3"}),(0,x.jsx)("div",{className:"d-flex flex-column",children:(0,x.jsx)("a",{href:"#",className:"text-gray-800 text-hover-primary mb-1",children:t.rolename})})]})},H=function(e){var t=e.user;return(0,x.jsxs)("div",{className:"d-flex align-items-center",children:[(0,x.jsx)("div",{className:"symbol symbol-circle symbol-50px overflow-hidden me-3"}),(0,x.jsx)("div",{className:"d-flex flex-column",children:(0,x.jsx)("a",{href:"#",className:"text-gray-800 text-hover-primary mb-1",children:(0,x.jsx)("div",{dangerouslySetInnerHTML:{__html:String(t.Permission)}})})})]})},q=function(e){var t=e.className,n=e.title,r=e.tableProps,a=r.column.id,s=v(),c=s.state,d=s.updateState,u=(0,i.useMemo)((function(){return c.sort&&c.sort===a}),[c,a]),m=(0,i.useMemo)((function(){return c.order}),[c]);return(0,x.jsx)("th",(0,o.Z)((0,o.Z)({},r.column.getHeaderProps()),{},{className:(0,U.Z)(t,u&&void 0!==m&&"table-sort-".concat(m)),style:{cursor:"pointer"},onClick:function(){if("actions"!==a&&"selection"!==a)if(u){if(u&&void 0!==m){if("asc"===m)return void d((0,o.Z)({sort:a,order:"desc"},l.Xw));d((0,o.Z)({sort:void 0,order:void 0},l.Xw))}}else d((0,o.Z)({sort:a,order:"asc"},l.Xw))},children:n}))},E=[{Header:function(e){return(0,x.jsx)(q,{tableProps:e,title:"Role Name",className:"min-w-125px"})},id:"rolename",Cell:function(e){var t=Object.assign({},((0,T.Z)(e),e));return(0,x.jsx)(M,{user:t.data[t.row.index]})}},{Header:function(e){return(0,x.jsx)(q,{tableProps:e,title:"Permissions",className:"min-w-125px"})},id:"Permission",Cell:function(e){var t=Object.assign({},((0,T.Z)(e),e));return(0,x.jsx)(H,{user:t.data[t.row.index]})}}],V=function(){return(0,x.jsx)("div",{style:(0,o.Z)((0,o.Z)({},{borderRadius:"0.475rem",boxShadow:"0 0 50px 0 rgb(82 63 105 / 15%)",backgroundColor:"#fff",color:"#7e8299",fontWeight:"500",margin:"0",width:"auto",padding:"1rem 2rem",top:"calc(50% - 2rem)",left:"calc(50% - 4rem)"}),{},{position:"absolute",textAlign:"center"}),children:"Processing..."})},D=function(e){return"&laquo; Previous"===e?"Previous":"Next &raquo;"===e?"Next":e},X=function(){var e,t=function(){var e=(0,o.Z)({links:[]},l.Xw),t=g().response;return t&&t.payload&&t.payload.pagination?t.payload.pagination:e}(),n=y(),r=v().updateState;return(0,x.jsxs)("div",{className:"row",children:[(0,x.jsx)("div",{className:"col-sm-12 col-md-5 d-flex align-items-center justify-content-center justify-content-md-start"}),(0,x.jsx)("div",{className:"col-sm-12 col-md-7 d-flex align-items-center justify-content-center justify-content-md-end",children:(0,x.jsx)("div",{id:"kt_table_users_paginate",children:(0,x.jsx)("ul",{className:"pagination",children:null===(e=t.links)||void 0===e?void 0:e.map((function(e){return(0,o.Z)((0,o.Z)({},e),{},{label:D(e.label)})})).map((function(e){return(0,x.jsx)("li",{className:(0,U.Z)("page-item",{active:t.page===e.page,disabled:n,previous:"Previous"===e.label,next:"Next"===e.label}),children:(0,x.jsx)("a",{className:(0,U.Z)("page-link",{"page-text":"Previous"===e.label||"Next"===e.label,"me-5":"Previous"===e.label}),onClick:function(){var a;(a=e.page)&&!n&&t.page!==a&&r({page:a,items_per_page:t.items_per_page||10})},style:{cursor:"pointer"},children:D(e.label)})},e.label)}))})})})]})},Q=function(){var e=N(),t=y(),n=(0,i.useMemo)((function(){return e}),[e]),r=(0,i.useMemo)((function(){return E}),[]),a=(0,L.useTable)({columns:r,data:n}),s=a.getTableProps,c=a.getTableBodyProps,d=a.headers,u=a.rows,m=a.prepareRow;return(0,x.jsxs)(l.mN,{className:"py-4",children:[(0,x.jsx)("div",{className:"table-responsive",children:(0,x.jsxs)("table",(0,o.Z)((0,o.Z)({id:"kt_table_users",className:"table align-middle table-row-dashed fs-6 gy-5 dataTable no-footer"},s()),{},{children:[(0,x.jsx)("thead",{children:(0,x.jsx)("tr",{className:"text-start text-muted fw-bolder fs-7 text-uppercase gs-0",children:d.map((function(e){return(0,x.jsx)(I,{column:e},e.id)}))})}),(0,x.jsx)("tbody",(0,o.Z)((0,o.Z)({className:"text-gray-600 fw-bold"},c()),{},{children:u.length>0?u.map((function(e,t){return m(e),(0,x.jsx)(A,{row:e},"row-".concat(t,"-").concat(e.id))})):(0,x.jsx)("tr",{children:(0,x.jsx)("td",{colSpan:7,children:(0,x.jsx)("div",{className:"d-flex text-center w-100 align-content-center justify-content-center",children:"No matching records found"})})})}))]}))}),(0,x.jsx)(X,{}),t&&(0,x.jsx)(V,{})]})},W=function(){var e=_().setItemIdForUpdate;return(0,x.jsxs)("div",{className:"modal-header",children:[(0,x.jsx)("h2",{className:"fw-bolder",children:"Edit Role"}),(0,x.jsx)("div",{className:"btn btn-icon btn-sm btn-active-icon-primary","data-kt-users-modal-action":"close",onClick:function(){return e(void 0)},style:{cursor:"pointer"},children:(0,x.jsx)(l.D8,{path:"/media/icons/duotune/arrows/arr061.svg",className:"svg-icon-1"})})]})},B=n(6863),O=n(5173),J=n(2062),G=n.n(J),z={Permission:"",_id:null,id:null,role_name:"",rolename:"",status:"",label:"",value:"",UserManagement:"",UploadClaims:"",ViewClaims:"",ViewMyClaims:"",AddNewPM:"",AddNewPractice:"",ARCommentHistory:"",AssignClaim:"",ReportCTR:"",ReportTPD:"",BotCSC:"",ReportPCA:""},K="/api/roles/getRoleList",Y=B.Ry().shape({role_name:B.Z_().required("Role Name is required"),PermissionsList:B.Z_().required("Permission List is required")}),ee=function(e){var t=e.user,n=e.isUserLoading,r=_().setItemIdForUpdate,a=(0,i.useState)(z),l=(0,s.Z)(a,2),c=(l[0],l[1],(0,i.useState)([{role_name:"",_id:""}])),d=(0,s.Z)(c,2),m=d[0],p=d[1],h=(0,i.useState)([{role_name:"",_id:""}]),v=(0,s.Z)(h,2),j=(v[0],v[1]),b=(0,i.useState)({}),N=(0,s.Z)(b,2),y=(N[0],N[1]),Z=(0,i.useState)([]),w=(0,s.Z)(Z,2),S=w[0],C=w[1],R=g().refetch,F=(0,i.useState)((0,o.Z)((0,o.Z)({},t),{},{id:t.id||z.id,rolename:t.rolename||z.rolename,label:t.label||z.label,value:t.value||z.value})),L=(0,s.Z)(F,1)[0],I=function(e){e&&R(),r(void 0)},U=function(){var e=(0,P.Z)((0,k.Z)().mark((function e(){var n;return(0,k.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.id&&y({value:t.id,label:t.role_name}),e.next=3,u().get(K);case 3:n=e.sent,console.log("Result",n.data),n.data&&j(n.data.data);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),A=function(){var e=(0,P.Z)((0,k.Z)().mark((function e(){var t,n;return(0,k.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u().get("/users/getPermissionRoleList");case 2:return(t=e.sent).data&&C(t.data.data),e.next=6,u().get(K);case 6:(n=e.sent).data&&p(n.data.data);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,i.useEffect)((function(){A(),U()}),[]);var T=(0,O.TA)({initialValues:L,validationSchema:Y,onSubmit:function(){var e=(0,P.Z)((0,k.Z)().mark((function e(t,n){var r,a;return(0,k.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.setSubmitting,console.log("values",t),r(!0),e.prev=3,e.next=6,f(t);case 6:a=e.sent,console.log("test",a.role_name),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),console.error(e.t0);case 13:return e.prev=13,t._id?G()({title:"Success",text:"".concat(t.role_name," Updated Successfully..."),icon:"success"}).then((function(e){r(!0),I(!0)})):G()({title:"Success",text:"".concat(t.role_name," Created Successfully..."),icon:"success"}).then((function(e){r(!0),I(!0)})),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[3,10,13,16]])})));return function(t,n){return e.apply(this,arguments)}}()}),M=function(){var e=(0,P.Z)((0,k.Z)().mark((function e(t){return(0,k.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return T.setFieldValue("role_name",t.target.value),e.next=3,u().post("/api/roles/getRoleByid",{id:t.target.value}).then((function(e){e.data.data.PermissionsList.length>0?e.data.data.PermissionsList.map((function(e,t){$("input[name=".concat(e.label,"][value=").concat(e.value,"]")).prop("checked",!0),T.setFieldValue(e.label,e.value)})):$("input[class='form-check-input']").removeAttr("checked")}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)("form",{id:"kt_modal_add_user_form",className:"form",onSubmit:T.handleSubmit,noValidate:!0,children:[(0,x.jsxs)("div",{className:"d-flex flex-column scroll-y me-n7 pe-7",id:"kt_modal_add_user_scroll","data-kt-scroll":"true","data-kt-scroll-activate":"{default: false, lg: true}","data-kt-scroll-max-height":"auto","data-kt-scroll-dependencies":"#kt_modal_add_user_header","data-kt-scroll-wrappers":"#kt_modal_add_user_scroll","data-kt-scroll-offset":"300px",children:[(0,x.jsx)("div",{className:"form-group row",children:(0,x.jsxs)("div",{className:"col-lg-6 fv-row",children:[(0,x.jsx)("label",{className:"col-md-4 col-form-label fw-bold fs-6",children:(0,x.jsx)("span",{className:"required",children:"Role Name"})}),(0,x.jsxs)("select",{onChange:M,id:"role_name",name:"role_name",className:"form-select form-select-solid form-select-lg fw-bold",children:[(0,x.jsx)("option",{value:"",children:"Role Name"}),m.map((function(e,t){return(0,x.jsx)("option",{value:e._id,children:e.role_name},t)}))]})]})}),(0,x.jsxs)("table",{id:"kt_table_users",className:"table align-middle table-row-dashed fs-6 gy-5 dataTable no-footer",children:[(0,x.jsx)("thead",{children:(0,x.jsxs)("tr",{className:"text-start text-muted fw-bolder fs-7 text-uppercase gs-0",children:[(0,x.jsx)("th",{children:"Permissions"}),(0,x.jsx)("th",{children:"Access"})]})}),(0,x.jsx)("tbody",{className:"text-gray-600 fw-bold",children:S.map((function(e,t){return(0,x.jsxs)("tr",{children:[(0,x.jsx)("td",{children:e.label}),(0,x.jsx)("td",{children:e.AttributesList.map((function(t,n){return(0,x.jsx)(x.Fragment,{children:(0,x.jsxs)("div",{className:"form-check form-check-inline",children:[(0,x.jsx)("input",(0,o.Z)((0,o.Z)({className:"form-check-input",type:"radio"},T.getFieldProps(e.value)),{},{id:t.label,value:t.value})),(0,x.jsx)("label",{className:"form-check-label",htmlFor:t.label,children:t.label})]})})}))})]})}))})]})]}),(0,x.jsxs)("div",{className:"text-center pt-15",children:[(0,x.jsx)("button",{type:"reset",onClick:function(){return I()},className:"btn btn-light me-3","data-kt-users-modal-action":"cancel",disabled:T.isSubmitting||n,children:"Discard"}),(0,x.jsxs)("button",{type:"submit",className:"btn btn-primary","data-kt-users-modal-action":"submit",disabled:n||T.isSubmitting||!T.isValid||!T.touched,children:[(0,x.jsx)("span",{className:"indicator-label",children:"Submit"}),(T.isSubmitting||n)&&(0,x.jsxs)("span",{className:"indicator-progress",children:["Please wait..."," ",(0,x.jsx)("span",{className:"spinner-border spinner-border-sm align-middle ms-2"})]})]})]})]}),(T.isSubmitting||n)&&(0,x.jsx)(V,{})]})},te=function(){var e=_(),t=e.itemIdForUpdate,n=e.setItemIdForUpdate,r=(0,l.UE)(t),a=(0,c.useQuery)("".concat(l.vb.USERS_LIST,"-user-").concat(t),(function(){return e=t,u().get("".concat(m,"/roles?role_id=").concat(e)).then((function(e){return e.data})).then((function(e){return e.data}));var e}),{cacheTime:0,enabled:r,onError:function(e){n(void 0),console.error(e)}}),s=a.isLoading,i=a.data,o=a.error;return t?s||o||!i?null:(0,x.jsx)(ee,{isUserLoading:s,user:i}):(0,x.jsx)(ee,{isUserLoading:s,user:{id:void 0}})},ne=function(){return(0,i.useEffect)((function(){return document.body.classList.add("modal-open"),function(){document.body.classList.remove("modal-open")}}),[]),(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("div",{className:"modal fade show d-block",id:"kt_modal_add_user",role:"dialog",tabIndex:-1,"aria-modal":"true",children:(0,x.jsx)("div",{className:"modal-dialog modal-dialog-centered modal-xl",children:(0,x.jsxs)("div",{className:"modal-content",children:[(0,x.jsx)(W,{}),(0,x.jsx)("div",{className:"modal-body scroll-y mx-5 mx-xl-15 my-7",children:(0,x.jsx)(te,{})})]})})}),(0,x.jsx)("div",{className:"modal-backdrop fade show"})]})},re=function(){var e=_().itemIdForUpdate;return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)(l.O7,{children:[(0,x.jsx)(F,{}),(0,x.jsx)(Q,{})]}),void 0!==e&&(0,x.jsx)(ne,{})]})},ae=function(){return(0,x.jsx)(h,{children:(0,x.jsx)(b,{children:(0,x.jsx)(w,{children:(0,x.jsx)(re,{})})})})},se=[{title:"Role Management",path:"/apps/role-management/role",isSeparator:!1,isActive:!1},{title:"",path:"",isSeparator:!0,isActive:!1}],ie=function(){return(0,x.jsxs)(r.Z5,{children:[(0,x.jsx)(r.AW,{element:(0,x.jsx)(r.j3,{}),children:(0,x.jsx)(r.AW,{path:"role",element:(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(a.V1,{breadcrumbs:se,children:"Role list"}),(0,x.jsx)(ae,{})]})})}),(0,x.jsx)(r.AW,{index:!0,element:(0,x.jsx)(r.Fg,{to:"/apps/role-management/role"})})]})}}}]);
//# sourceMappingURL=398.fd5e3ddd.chunk.js.map